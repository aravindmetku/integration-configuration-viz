(function(e){function t(t){for(var n,o,a=t[0],c=t[1],l=t[2],d=0,p=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},s={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/integration-configuration-viz/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},2958:function(e,t,r){"use strict";r("f72d")},"2cf2":function(e,t,r){},"3d64":function(e,t,r){},"46b1":function(e,t,r){"use strict";r("3d64")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("app-bar",{on:{updateTitle:e.onNewTitle}}),r("div",{staticClass:"content"},[r("div",{staticStyle:{width:"50%",border:"2px"}},[r("div",{staticClass:"stats-action"},[r("stats",{attrs:{processorsData:e.displayData}}),r("action",{attrs:{selectedEditorDisplayToggle:e.selectedEditorDisplayToggle},on:{toggled:e.onToggled}})],1),r("editor",{attrs:{content:e.displayDataStr,codeMirrorTheme:e.codeMirrorTheme},on:{updated:e.updatedContent}}),e.fileHandlerManager.fileName?r("span",{staticClass:"fileSync"},[e._v(" Last Synced "+e._s(e.fileHandlerManager.fileName)+" at "+e._s(e.fileHandlerManager.lastUpdatedAt)+" ("+e._s(e.fileHandlerManager.updateStatus)+") ")]):r("span",{staticClass:"fileSync",on:{click:e.createFileHandlerForSession}},[e._v(" "+e._s(e.fileHandlerManager.updateStatus)+" ")])],1),r("div",{ref:"dragMe",staticClass:"resizer"}),r("div",{staticStyle:{flex:"1 1 0"}},e._l(e.groupedProcessors,(function(t,n){return r("cardWrapper",{key:n,attrs:{data:t,selectedProcessorIndex:e.selectedProcessorIndex},on:{click:e.processorClicked,onFindVariableUsageClicked:e.processorVariableClickedForUsages}})})),1)])],1)},i=[],o=(r("4de4"),r("7db0"),r("5db7"),r("4160"),r("caad"),r("d81d"),r("13d5"),r("73d9"),r("b0c0"),r("4fad"),r("07ac"),r("ac1f"),r("2532"),r("1276"),r("159b"),r("3835")),a=r("2909"),c=(r("96cf"),r("b85c")),l=r("1da1"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"processor"},[r("codemirror",{ref:"myCm",staticClass:"code-mirror-pane",attrs:{options:e.codeMirrorOptions},on:{input:e.update},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)])},d=[],p=(r("b866"),r("ac1e"),r("eb8f"),r("01cb"),r("697e"),r("8f94"));r("f9d4"),r("4895"),r("cbc8"),r("aedd"),r("a2c1"),r("8d70"),r("9f09"),r("164b");var f={name:"editor",data:function(){return{options:{mode:"code"}}},props:{content:String,codeMirrorTheme:String},computed:{id:function(){return this.p.processorName},codeMirrorOptions:function(){return{tabSize:2,mode:{name:"javascript",json:!0},theme:this.codeMirrorTheme,lineNumbers:!0,lineWrapping:!0,moveOnDrag:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}}}}},methods:{update:function(e){console.log("inside update input event"),this.$emit("updated",e)}},components:{codemirror:p["codemirror"]}},h=f,g=(r("a000"),r("2877")),v=Object(g["a"])(h,u,d,!1,null,null,null),m=v.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex-strip"},[r("div",{staticClass:"stat-card"},[r("h2",{staticClass:"stat-card-stat"},[e._v(e._s(e.processorsCount))]),r("div",{staticClass:"stat-card-title"},[e._v("Total Processors Count")])]),r("div",{staticClass:"stat-card"},[r("h2",{staticClass:"stat-card-stat"},[e._v(e._s(e.highRun))]),r("div",{staticClass:"stat-card-title"},[e._v("Highest Run Number")])])])},y=[],S={name:"stats",props:{processorsData:{type:Array,required:!0}},computed:{processorsCount:function(){var e,t;return null!==(e=null===(t=this.processorsData)||void 0===t?void 0:t.length)&&void 0!==e?e:0},highRun:function(){return this.processorsData[this.processorsData.length-1].run}}},x=S,C=(r("46b1"),Object(g["a"])(x,b,y,!1,null,"7f706146",null)),O=C.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"btn-group"},[r("button",{staticClass:"act-btn",class:["CONNECTOR"===e.selectedEditorDisplayToggle?"activeBtn":""],on:{click:function(t){return e.updateOnToggle("CONNECTOR")}}},[e._v("Connector ")]),r("button",{staticClass:"act-btn",class:["OUTPUT"===e.selectedEditorDisplayToggle?"activeBtn":""],on:{click:function(t){return e.updateOnToggle("OUTPUT")}}},[e._v("Output ")]),r("button",{staticClass:"act-btn",class:["PROCESSOR"===e.selectedEditorDisplayToggle?"activeBtn":""],on:{click:function(t){return e.updateOnToggle("PROCESSOR")}}},[e._v("Processor ")])])},P=[],k={name:"action",data:function(){return{}},computed:{},methods:{updateOnToggle:function(e){this.$emit("toggled",e)}},props:{selectedEditorDisplayToggle:String}},N=k,T=(r("e5ea"),Object(g["a"])(N,D,P,!1,null,"270d872a",null)),E=T.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapperContainer"},[r("h5",{staticClass:"header"},[e._v("Execution Stage: "),r("strong",[e._v(e._s(e.data[0]))])]),r("div",{staticClass:"container"},e._l(e.data[1],(function(t,n){return r("card",{key:n,attrs:{"is-in-clicked-state":e.selectedProcessorIndex===t.globalIdx,processor:t.pr,"has-error":t.prErrors.length>0,"var-highlight":t.selectedVarInUsage},on:{click:function(r){return e.processorClicked(t.pr,t.globalIdx)},findVariableUsage:function(r){return e.findVariableUsage(t.globalIdx,r)}}})})),1)])},_=[],I=(r("a9e3"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"processor-card",class:{clickedState:e.isInClickedState}},[r("div",{staticClass:"card-text",class:{"variable-highlight":e.varHighlight.isUsed,error:e.hasError},on:{click:e.clicked}},[r("h6",[e._v(e._s(e.cardText))])]),r("div",{staticStyle:{"text-align":"center"}},[r("h3",{staticClass:"processor-info",style:{background:e.bgColor},on:{mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[e.hover?r("span",[e._v(" "+e._s(e.processor.processorType)+" ")]):e._e()])]),e._l(e.processor.variables,(function(t){return r("div",{key:t.key,staticClass:"processor-info variable",class:{"variable-init":t.key===e.varHighlight.variableKey},staticStyle:{"text-align":"center"},on:{click:function(r){return e.findUsageClicked(t.key)},mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[e.hover?r("span",[e._v(" "+e._s(t.key)+" ")]):e._e()])}))],2)}),U=[],M={name:"card",data:function(){return{hover:!1}},computed:{cardText:function(){var e;return null!==(e=this.processor.processorDescription)&&void 0!==e?e:this.processor.processorName},bgColor:function(){switch(this.processor.processorType){case"inboundFactSheet":return"#00A399";case"inboundRelation":return"#0F7EB5";case"inboundSubscription":return"#18AECE";case"inboundDocument":return"#33CC58";case"inboundTag":return"#916B50";case"inboundMetrics":return"#2889FF";case"inboundImpact":return"#9755CD";default:return"#FAD71E"}}},methods:{clicked:function(){this.$emit("click")},findUsageClicked:function(e){this.$emit("findVariableUsage",e)}},props:{processor:{run:Number,processorDescription:String,processorName:String,processorType:String,variables:Object},hasError:Boolean,varHighlight:{isUsed:Boolean,initiatorProcessorGlobalIdx:Number,variableKey:String},isInClickedState:Boolean},mounted:function(){}},H=M,R=(r("f33f"),Object(g["a"])(H,I,U,!1,null,null,null)),j=R.exports,F={name:"cardWrapper",computed:{},components:{card:j},methods:{processorClicked:function(e,t){this.$emit("click",{idx:t})},findVariableUsage:function(e,t){console.log("card wrapper",e),this.$emit("onFindVariableUsageClicked",{initProcessorIdx:e,variableKey:t})}},props:{data:{type:Array,required:!0},selectedProcessorIndex:Number}},$=F,A=(r("2958"),Object(g["a"])($,w,_,!1,null,null,null)),z=A.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bar"},[r("h2",{staticClass:"title"},[e._v(" Integration API Configuration Visualiser")]),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.connectorName,expression:"connectorName"}],attrs:{type:"text",placeholder:"session name"},domProps:{value:e.connectorName},on:{input:[function(t){t.target.composing||(e.connectorName=t.target.value)},e.updated]}}),r("a",{staticClass:"howitworks",attrs:{href:"https://github.com/aravindmetku/integration-configuration-viz/blob/master/README.md#how-it-works"}},[e._v("How it works?")])])])},V=[],B={name:"app-bar",data:function(){return{connectorName:""}},methods:{updated:function(){this.$emit("updateTitle",this.connectorName)}}},K=B,W=(r("d601"),Object(g["a"])(K,J,V,!1,null,"05582d79",null)),G=W.exports;function L(e,t){return e.run<t.run?-1:e.run>t.run?1:0}function q(e){try{return JSON.parse(e).warnings.reduce((function(e,t){var r,n;return e[t.processor.name]||(e[t.processor.name]=[]),e[t.processor.name].push(null!==(r=null===t||void 0===t||null===(n=t.detail)||void 0===n?void 0:n.message)&&void 0!==r?r:t.message),e}),{})}catch(t){return[]}}function X(e){if(!e)return[];var t=[];function r(e,t){"string"!==typeof e?Object.values(e).forEach((function(e){return r(e,t)})):t.push(e)}return r(e,t),t}function Q(e){return Y.apply(this,arguments)}function Y(){return Y=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker(t);case 2:if(r=e.sent,n=Object(o["a"])(r,1),s=n[0],"file"===s.kind){e.next=8;break}return console.error("Select a file"),e.abrupt("return");case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function Z(e,t,r){return ee.apply(this,arguments)}function ee(){return ee=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,n){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("No file is selected."),e.abrupt("return");case 3:return e.prev=3,e.next=6,t.createWritable();case 6:return s=e.sent,e.next=9,s.write(n);case 9:return e.next=11,s.close();case 11:r.lastUpdatedAt=(new Date).toISOString(),r.updateStatus="file in Sync!",e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](3),console.log(e.t0),r.updateStatus="failed to save to the file. Beware loss of data!";case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ee.apply(this,arguments)}var te,re=function(e){return function(t){var r,n=e.split(/\${[^}]+}/gm).filter(Boolean),s=/variables[.|[](.+?)$|]]/gm,i=/helper:getFromMap\(variables,(.+?)\)/gm,o=Object(c["a"])(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,l=s.exec(t);while(null!=l){var u=l[1].includes(a);if(u)return!0;l=s.exec(t)}var d=i.exec(t);while(null!=d){var p=d[1].includes(a);if(p)return!0;d=i.exec(t)}}}catch(f){o.e(f)}finally{o.f()}return!1}},ne={name:"App",data:function(){return{codeDisplayStr:'\n       {\n          "connectorType": "leanix-vsm-connector",\n          "connectorId": "leanix-connector",\n          "connectorVersion": "1.0.0",\n          "processingDirection": "inbound",\n          "processingMode": "full",\n          "processors": [{\n            "processorType": "inboundFactSheet",\n            "processorName": "Apps from Deployments",\n            "processorDescription": "creates Process FS from gives LDIF",\n            "run": 1,\n            "variables": [{\n               "key": "app_variable",\n               "value": "${lx.relations.size()}"\n            }]\n          }, {\n            "processorType": "inboundFactSheet",\n            "processorName": "Updates description",\n            "processorDescription": "Updates description",\n            "run": 2,\n            "updates": [{\n               "key": {\n                 "expr": "description"\n               },\n               "values": [{\n                 "expr": "Relations size is : ${helper:getFromMap(variables, \'app_variable\')}"\n               }]\n            }]\n          }]\n        }\n      ',errorDisplayStr:'{\n                            "results": null,\n                            "warnings": [\n                                {\n                                    "processor": {\n                                        "name": "Apps from Deployments",\n                                        "index": -1\n                                    },\n                                    "message": "Impacts does not support simulation mode. Skipping full sync deletion for impacts",\n                                    "category": "fullSyncDeletion",\n                                    "status": "WARNING"\n                                }]}',processorDisplayStr:"",selectedProcessorIndex:0,selectedEditorDisplayToggle:"CONNECTOR",cmOptions:{tabSize:2,mode:"javascript",theme:"monokai",lineNumbers:!0,lineWraping:!0},resizer:null,x:0,leftSide:0,rightSide:0,leftWidth:0,variableUsageHighlightProcessors:{initiatorProcessorGlobalIdx:null,status:{},variableKey:null},fileHandlerManager:{fileName:null,updateStatus:"click here to select Integration API JSON file!",lastUpdatedAt:"never"},isSessionTitleUpdatedManually:!1}},computed:{displayData:function(){try{return JSON.parse(this.codeDisplayStr).processors.sort(L)}catch(e){return[]}},codeMirrorTheme:function(){return"CONNECTOR"===this.selectedEditorDisplayToggle?"idea":"PROCESSOR"===this.selectedEditorDisplayToggle?"eclipse":"elegant"},displayDataStr:function(){if(this.isSessionTitleUpdatedManually||this.onNewTitle(JSON.parse(this.codeDisplayStr).connectorId),"CONNECTOR"===this.selectedEditorDisplayToggle)return JSON.stringify(JSON.parse(this.codeDisplayStr),null,2);if("PROCESSOR"===this.selectedEditorDisplayToggle){var e={errors:q(this.errorDisplayStr)[this.displayData[this.selectedProcessorIndex].processorName],processor:this.displayData[this.selectedProcessorIndex]};return JSON.stringify(e,null,2)}try{return JSON.stringify(JSON.parse(this.errorDisplayStr),null,2)}catch(t){return this.errorDisplayStr}},groupedProcessors:function(){var e=this,t=q(this.errorDisplayStr),r=this.displayData.reduce((function(r,n,s){var i,o;return r[n.run]||(r[n.run]=[]),r[n.run].push({pr:n,prErrors:null!==(i=t[n.processorName])&&void 0!==i?i:[],globalIdx:s,selectedVarInUsage:{isUsed:null!==(o=e.variableUsageHighlightProcessors.status[n.processorName])&&void 0!==o&&o,initiatorProcessorGlobalIdx:e.variableUsageHighlightProcessors.initiatorProcessorGlobalIdx,variableKey:e.variableUsageHighlightProcessors.variableKey}}),r}),{});return Object.entries(r)}},methods:{createFileHandlerForSession:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={types:[{description:"Json",accept:{"json/*":[".json"]}}],excludeAcceptAllOption:!0,multiple:!1},window.showOpenFilePicker){t.next=4;break}return e.fileHandlerManager.updateStatus="file system access is unavailable. Hint: Use different browser",t.abrupt("return");case 4:return t.next=6,Q(r);case 6:return te=t.sent,e.fileHandlerManager.updateStatus="file selected",e.fileHandlerManager.fileName=te.name,t.next=11,te.getFile();case 11:return n=t.sent,t.next=14,n.text();case 14:e.codeDisplayStr=t.sent;case 15:case"end":return t.stop()}}),t)})))()},onNewTitle:function(e){this.isSessionTitleUpdatedManually=!0,document.title=e?"".concat(e," | Integration Visualiser"):"Integration Visualiser"},updatedContent:function(e){if("PROCESSOR"===this.selectedEditorDisplayToggle){var t=Object(a["a"])(this.displayData);t[this.selectedProcessorIndex]=JSON.parse(e).processor;var r=JSON.parse(this.codeDisplayStr);r.processors=t,this.codeDisplayStr=JSON.stringify(r)}else"CONNECTOR"===this.selectedEditorDisplayToggle?(this.codeDisplayStr=e,Z(te,this.fileHandlerManager,e).then((function(){return console.log("Saved to file!")}))):this.errorDisplayStr=e},onToggled:function(e){this.selectedEditorDisplayToggle=e},mouseDownHandler:function(e){this.x=e.clientX,this.leftWidth=this.leftSide.getBoundingClientRect().width,document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler)},mouseMoveHandler:function(e){var t=e.clientX-this.x,r=100*(this.leftWidth+t)/this.resizer.parentNode.getBoundingClientRect().width;this.leftSide.style.width="".concat(r,"%"),document.body.style.cursor="col-resize",this.leftSide.style.userSelect="none",this.leftSide.style.pointerEvents="none",this.rightSide.style.userSelect="none",this.rightSide.style.pointerEvents="none"},mouseUpHandler:function(){this.resizer.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),this.leftSide.style.removeProperty("user-select"),this.leftSide.style.removeProperty("pointer-events"),this.rightSide.style.removeProperty("user-select"),this.rightSide.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler)},processorClicked:function(e){this.selectedProcessorIndex=e.idx,this.selectedEditorDisplayToggle="PROCESSOR"},processorVariableClickedForUsages:function(e){var t=e.initProcessorIdx,r=e.variableKey;if(this.variableUsageHighlightProcessors.initiatorProcessorGlobalIdx!==t||this.variableUsageHighlightProcessors.variableKey!==r){console.log("find var usages",r);var n=this.groupedProcessors.flatMap((function(e){return e[1]})).map((function(e){return e.selectedVarInUsage=!1,e})),s=re(r),i=n.filter((function(e){return e.globalIdx!==t})).filter((function(e){return!!X(e).find(s)})).reduce((function(e,t){return e[t.pr.processorName]=!0,e}),{});this.variableUsageHighlightProcessors={status:i,variableKey:r,initiatorProcessorGlobalIdx:t}}else this.variableUsageHighlightProcessors={status:{},variableKey:null,initiatorProcessorGlobalIdx:null}}},components:{AppBar:G,Action:E,Stats:O,editor:m,cardWrapper:z},created:function(){},mounted:function(){this.resizer=this.$refs.dragMe,console.log("inside resizer ",this.resizer),this.leftSide=this.resizer.previousElementSibling,this.rightSide=this.resizer.nextElementSibling,this.x=0,this.resizer.addEventListener("mousedown",this.mouseDownHandler)}},se=ne,ie=(r("034f"),Object(g["a"])(se,s,i,!1,null,null,null)),oe=ie.exports;r("a7be"),r("4989"),r("ab8b");n["a"].use(p["codemirror"]),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(oe)}}).$mount("#app")},"85ec":function(e,t,r){},a000:function(e,t,r){"use strict";r("a988")},a988:function(e,t,r){},b9af:function(e,t,r){},d506:function(e,t,r){},d601:function(e,t,r){"use strict";r("b9af")},e5ea:function(e,t,r){"use strict";r("2cf2")},f33f:function(e,t,r){"use strict";r("d506")},f72d:function(e,t,r){}});
//# sourceMappingURL=app.6e70b535.js.map